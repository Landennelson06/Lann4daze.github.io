<!DOCTYPE html>
<meta charset="utf-8">
    <html>
        <head>
            <title>
                Discord stuff
            </title>
        </head>
        <a href="https://discord.com/oauth2/authorize?response_type=token&client_id=643558470204915712&scope=identify" id="demo">
            Click here
        </a>
        <body>
            <script type="text/javascript">
                API_ENDPOINT = 'https://discord.com/api/v6';
                function json(response) {
                    return response.json()
                }

                if(window.location.hash) {
                // Fragment exists
                fragements = window.location.hash.split('#')[1].split('&');
                let object = {};
                let fragment;
                for (var i = fragements.length - 1; i >= 0; i--) {
                    fragment = fragements[i].split('=');
                    object[fragment[0]] = fragment[1];
                }
                console.log(object);
                
                headers = {
                    
                }
                fetch(`${API_ENDPOINT}/users/@me`, {
                    method: 'get',
                    headers: {
                        'Content-Type':'application/json',
                        'Authorization': `${object.token_type} ${object.access_token}`
                    }//,body: 'foo=bar&lorem=ipsum'
                    })
                .then(json)
                .then(function (data) {
                    console.log('Request succeeded with JSON response', data);
                })
                .catch(function (error) {
                    console.log('Request failed', error);
                });


            } else {
                    // Fragment doesn't exist
            }
            </script>
        </body>
    </html>
</meta>